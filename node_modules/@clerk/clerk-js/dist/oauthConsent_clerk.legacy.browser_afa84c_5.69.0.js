"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["776"],{40429:function(e,t,o){o.r(t),o.d(t,{OAuthConsent:()=>C,OAuthConsentInternal:()=>m}),o(65223),o(91634),o(98383),o(45261),o(70957),o(24551),o(22349),o(56113);var n=o(79109),r=o(83799),l=o(69144),i=o(11576),a=o(39541),c=o(53174),s=o(29629),d=o(44455),u=o(2672),h=o(92654),p=o(56459),g=o(19732),x=o(96519),b=o(30215),Z=o(81201),y=o(77623);function m(){let{scopes:e,oAuthApplicationName:t,oAuthApplicationLogoUrl:o,redirectUrl:u,onDeny:p,onAllow:x}=(0,i.useOAuthConsentContext)(),{user:b}=(0,r.aF)(),{applicationName:m,logoImageUrl:C}=(0,i.useEnvironment)().displayConfig,[w,R]=(0,l.useState)(!1),v=null==b?void 0:b.emailAddresses.find(e=>{var t;return e.id===(null===(t=b.primaryEmailAddress)||void 0===t?void 0:t.id)});function S(){try{let{hostname:e}=new URL(u);return e.split(".").slice(-2).join(".")}catch{return""}}return(0,n.BX)(a.Flow.Root,{flow:"oauthConsent",children:[(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{children:[o&&C&&(0,n.BX)(B,{children:[(0,n.tZ)(s.q,{imageUrl:o,size:e=>e.space.$12,rounded:!1}),(0,n.tZ)(f,{}),(0,n.tZ)(c.u,{})]}),o&&!C&&(0,n.tZ)(B,{children:(0,n.BX)(a.Box,{sx:{position:"relative"},children:[(0,n.tZ)(s.q,{imageUrl:o,size:e=>e.space.$12,rounded:!1}),(0,n.tZ)(k,{size:"sm",sx:e=>({position:"absolute",bottom:"calc(".concat(e.space.$3," * -1)"),right:"calc(".concat(e.space.$3," * -1)")})})]})}),!o&&C&&(0,n.BX)(a.Flex,{justify:"center",align:"center",gap:4,sx:e=>({marginBlockEnd:e.space.$6}),children:[(0,n.tZ)(k,{}),(0,n.tZ)(f,{}),(0,n.tZ)(c.u,{})]}),!o&&!C&&(0,n.tZ)(a.Flex,{justify:"center",align:"center",gap:4,sx:e=>({marginBlockEnd:e.space.$6}),children:(0,n.tZ)(k,{})}),(0,n.tZ)(h.h.Title,{localizationKey:t}),(0,n.tZ)(h.h.Subtitle,{localizationKey:"wants to access ".concat(m," on behalf of ").concat(v)})]}),(0,n.BX)(a.Box,{sx:e=>({textAlign:"left",borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$lg,overflow:"hidden"}),children:[(0,n.tZ)(a.Box,{sx:e=>({padding:e.space.$3,background:Z.common.mergedColorsBackground(y.O9.setAlpha(e.colors.$colorBackground,1),e.colors.$neutralAlpha50)}),children:(0,n.tZ)(a.Text,{variant:"subtitle",localizationKey:"This will allow ".concat(t," access to:")})}),(0,n.tZ)(a.Box,{as:"ul",sx:e=>({margin:e.sizes.$none,padding:e.sizes.$none}),children:(e||[]).map(e=>(0,n.tZ)(a.Box,{sx:e=>({display:"flex",alignItems:"baseline",paddingInline:e.space.$3,paddingBlock:e.space.$2,borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100,"&::before":{content:'""',display:"inline-block",width:e.space.$1,height:e.space.$1,background:e.colors.$colorTextSecondary,borderRadius:e.radii.$circle,transform:"translateY(-0.1875rem)",marginRight:e.space.$2,flexShrink:0}}),as:"li",children:(0,n.tZ)(a.Text,{variant:"subtitle",localizationKey:e.description||e.scope||""})},e.scope))})]}),(0,n.tZ)(a.Box,{sx:e=>({background:"rgba(243, 107, 22, 0.12)",padding:e.space.$4,borderRadius:e.radii.$lg}),children:(0,n.BX)(a.Text,{colorScheme:"warning",variant:"caption",children:["Make sure that you trust ",t," ","",(0,n.BX)(g.u.Root,{children:[(0,n.tZ)(g.u.Trigger,{children:(0,n.BX)(a.Text,{as:"span",role:"button",tabIndex:0,"aria-label":"View full URL",variant:"caption",sx:{textDecoration:"underline",textDecorationStyle:"dotted",cursor:"pointer",outline:"none",display:"inline-block"},onClick:()=>R(!0),children:["(",S(),")"]})}),(0,n.tZ)(g.u.Content,{text:"View full URL"})]}),"",". You may be sharing sensitive data with this site or app."]})}),(0,n.BX)(a.Grid,{columns:2,gap:3,children:[(0,n.tZ)(a.Button,{colorScheme:"secondary",variant:"outline",localizationKey:"Deny",onClick:p}),(0,n.tZ)(a.Button,{localizationKey:"Allow",onClick:x}),(0,n.BX)(a.Text,{sx:{gridColumn:"span 2"},colorScheme:"secondary",variant:"caption",children:["If you allow access, this app will redirect you to"," ",(0,n.BX)(g.u.Root,{children:[(0,n.tZ)(g.u.Trigger,{children:(0,n.tZ)(a.Text,{as:"span",role:"button",tabIndex:0,"aria-label":"View full URL",variant:"caption",sx:{textDecoration:"underline",textDecorationStyle:"dotted",cursor:"pointer",outline:"none",display:"inline-block"},onClick:()=>R(!0),children:S()})}),(0,n.tZ)(g.u.Content,{text:"View full URL"})]})]})]})]}),(0,n.tZ)(d.Z.Footer,{})]}),(0,n.tZ)($,{isOpen:w,onOpen:()=>R(!0),onClose:()=>R(!1),redirectUri:u,oAuthApplicationName:t})]})}function $(e){let{onOpen:t,onClose:o,isOpen:r,redirectUri:l,oAuthApplicationName:i}=e;return r?(0,n.tZ)(p.Modal,{handleOpen:t,handleClose:o,children:(0,n.tZ)(d.Z.Root,{children:(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{children:[(0,n.tZ)(h.h.Title,{localizationKey:"Redirect URL"}),(0,n.tZ)(h.h.Subtitle,{localizationKey:"Make sure you trust ".concat(i," and that this URL belongs to ").concat(i,".")})]}),(0,n.tZ)(b.gx,{style:{maxHeight:"none"},cols:50,rows:6,defaultValue:l,readOnly:!0})]})})}):null}function B(e){let{children:t}=e;return(0,n.tZ)(a.Flex,{justify:"center",align:"center",gap:4,sx:e=>({marginBlockEnd:e.space.$6}),children:t})}function k(e){let{size:t="md",sx:o}=e,r=e=>{let o="sm"===t?e.space.$6:e.space.$12;return{width:o,height:o}};return(0,n.tZ)(a.Box,{sx:e=>[{background:Z.common.mergedColorsBackground(y.O9.setAlpha(e.colors.$colorBackground,1),e.colors.$neutralAlpha50),borderRadius:e.radii.$circle,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,display:"flex",alignItems:"center",justifyContent:"center"},r,o],children:(0,n.tZ)(a.Icon,{icon:x.LG,sx:e=>({color:e.colors.$primary500})})})}function f(){return(0,n.tZ)(a.Box,{as:"svg",fill:"none",viewBox:"0 0 16 2",height:2,"aria-hidden":!0,sx:e=>({color:e.colors.$colorTextSecondary}),children:(0,n.tZ)("path",{stroke:"currentColor",strokeDasharray:"0.1 4",strokeLinecap:"round",strokeWidth:"2",d:"M1 1h14"})})}let C=(0,u.withCardStateProvider)(m)}}]);