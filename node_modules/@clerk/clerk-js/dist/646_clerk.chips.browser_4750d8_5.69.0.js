"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["646"],{2264:function(e,t,r){r.d(t,{B:()=>c,r:()=>b});var o=r(9109),n=r(6600),a=r(1576),i=r(9541),l=r(4676),s=r(7623);let c=()=>{let{data:e,isLoading:t}=(0,a.usePaymentAttempts)(),r=(0,a.useSubscriberTypeLocalizationRoot)();return(0,o.tZ)(n.wQ,{page:1,onPageChange:e=>{},itemCount:e?.total_count||0,pageCount:1,itemsPerPage:10,isLoading:t,emptyStateLocalizationKey:(0,i.localizationKeys)(`${r}.billingPage.paymentHistorySection.empty`),headers:[(0,i.localizationKeys)(`${r}.billingPage.paymentHistorySection.tableHeader__date`),(0,i.localizationKeys)(`${r}.billingPage.paymentHistorySection.tableHeader__amount`),(0,i.localizationKeys)(`${r}.billingPage.paymentHistorySection.tableHeader__status`)],rows:(e?.data||[]).map(e=>(0,o.tZ)(d,{paymentAttempt:e},e.id))})},d=({paymentAttempt:e})=>{let{id:t,amount:r,failedAt:a,paidAt:c,updatedAt:d,status:p}=e,{navigate:m}=(0,l.useRouter)();return(0,o.BX)(n.Uk,{onClick:()=>{m(`payment-attempt/${t}`)},children:[(0,o.BX)(i.Td,{sx:{cursor:"pointer"},children:[(0,o.tZ)(i.Text,{variant:"subtitle",children:(0,s.p6)(c||a||d,"long")}),(0,o.tZ)(i.Text,{colorScheme:"secondary",variant:"caption",truncate:!0,sx:e=>({marginTop:e.space.$0x5}),children:(0,s.LD)(t)})]}),(0,o.tZ)(i.Td,{sx:{cursor:"pointer"},children:(0,o.BX)(i.Text,{children:[r.currencySymbol,r.amountFormatted]})}),(0,o.tZ)(i.Td,{children:(0,o.tZ)(i.Badge,{colorScheme:"paid"===p?"success":"failed"===p?"danger":"primary",sx:{textTransform:"capitalize"},children:p})})]})};var p=r(2654),m=r(8e3),u=r(5298),y=r(2464),h=r(4174);let b=()=>{let{params:e,navigate:t}=(0,l.useRouter)(),{isLoading:r}=(0,a.useStatements)(),{getPaymentAttemptById:n}=(0,a.usePaymentAttemptsContext)(),c=(0,u.xr)(),d=e.paymentAttemptId?n(e.paymentAttemptId):null,y=d?.subscriptionItem;return r?(0,o.tZ)(i.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,o.tZ)(i.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:i.descriptors.spinner})}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(p.h.Root,{sx:e=>({borderBlockEndWidth:e.borderWidths.$normal,borderBlockEndStyle:e.borderStyles.$solid,borderBlockEndColor:e.colors.$neutralAlpha100,marginBlockEnd:e.space.$4,paddingBlockEnd:e.space.$4}),children:(0,o.tZ)(p.h.BackLink,{onClick:()=>void t("../../",{searchParams:new URLSearchParams("tab=payments")}),children:(0,o.tZ)(p.h.Title,{localizationKey:(0,i.localizationKeys)(`${c}.billingPage.start.headerTitle__payments`),textVariant:"h2"})})}),d?(0,o.BX)(i.Box,{elementDescriptor:i.descriptors.paymentAttemptRoot,as:"article",sx:e=>({borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$lg,overflow:"clip"}),children:[(0,o.BX)(i.Box,{elementDescriptor:i.descriptors.paymentAttemptHeader,as:"header",sx:e=>({padding:e.space.$4,background:e.colors.$neutralAlpha25,display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),children:[(0,o.BX)(i.Span,{elementDescriptor:i.descriptors.paymentAttemptHeaderTitleContainer,children:[(0,o.tZ)(i.Heading,{elementDescriptor:i.descriptors.paymentAttemptHeaderTitle,textVariant:"h2",localizationKey:(0,s.p6)(d.paidAt||d.failedAt||d.updatedAt,"long")}),(0,o.BX)(i.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:[(0,o.tZ)(x,{copyLabel:"Copy payment attempt ID",text:d.id}),(0,o.tZ)(i.Text,{colorScheme:"secondary",variant:"subtitle",children:(0,s.LD)(d.id)})]})]}),(0,o.tZ)(i.Badge,{elementDescriptor:i.descriptors.paymentAttemptHeaderBadge,colorScheme:"paid"===d.status?"success":"failed"===d.status?"danger":"primary",sx:{textTransform:"capitalize"},children:d.status})]}),(0,o.tZ)(i.Box,{elementDescriptor:i.descriptors.paymentAttemptBody,sx:e=>({padding:e.space.$4}),children:y&&(0,o.BX)(m.a.Root,{children:[(0,o.BX)(m.a.Group,{children:[(0,o.tZ)(m.a.Title,{title:y.plan.name}),(0,o.tZ)(m.a.Description,{prefix:"annual"===y.planPeriod?"x12":void 0,text:`${y.plan.currencySymbol}${"month"===y.planPeriod?y.plan.amountFormatted:y.plan.annualMonthlyAmountFormatted}`})]}),(0,o.BX)(m.a.Group,{borderTop:!0,variant:"tertiary",children:[(0,o.tZ)(m.a.Title,{title:(0,i.localizationKeys)("commerce.subtotal")}),(0,o.tZ)(m.a.Description,{text:`${y.amount?.currencySymbol}${y.amount?.amountFormatted}`})]}),y.credit&&y.credit.amount.amount>0&&(0,o.BX)(m.a.Group,{variant:"tertiary",children:[(0,o.tZ)(m.a.Title,{title:(0,i.localizationKeys)("commerce.credit")}),(0,o.tZ)(m.a.Description,{text:`- ${y.credit.amount.currencySymbol}${y.credit.amount.amountFormatted}`})]})]})}),(0,o.BX)(i.Box,{elementDescriptor:i.descriptors.paymentAttemptFooter,as:"footer",sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,background:e.colors.$neutralAlpha25,borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100,display:"flex",justifyContent:"space-between"}),children:[(0,o.tZ)(i.Text,{variant:"h3",localizationKey:(0,i.localizationKeys)("commerce.totalDue"),elementDescriptor:i.descriptors.paymentAttemptFooterLabel}),(0,o.BX)(i.Span,{elementDescriptor:i.descriptors.paymentAttemptFooterValueContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$2x5}),children:[(0,o.tZ)(i.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:i.descriptors.paymentAttemptFooterCurrency,sx:{textTransform:"uppercase"},children:d.amount.currency}),(0,o.BX)(i.Text,{variant:"h3",elementDescriptor:i.descriptors.paymentAttemptFooterValue,children:[d.amount.currencySymbol,d.amount.amountFormatted]})]})]})]}):(0,o.tZ)(i.Text,{localizationKey:(0,i.localizationKeys)(`${c}.billingPage.paymentHistorySection.notFound`),sx:{textAlign:"center"}})]})};function x({text:e,copyLabel:t="Copy"}){let{onCopy:r,hasCopied:n}=(0,y.VP)(e);return(0,o.tZ)(i.Button,{elementDescriptor:i.descriptors.paymentAttemptCopyButton,variant:"unstyled",onClick:r,sx:e=>({color:"inherit",width:e.sizes.$4,height:e.sizes.$4,padding:0,borderRadius:e.radii.$sm,"&:focus-visible":{outline:"2px solid",outlineColor:e.colors.$neutralAlpha200}}),focusRing:!1,"aria-label":n?"Copied":t,children:(0,o.tZ)(i.Icon,{size:"sm",icon:n?h.Jr:h.CK,"aria-hidden":!0})})}},5515:function(e,t,r){r.d(t,{j:()=>x,f:()=>d});var o=r(9109),n=r(6600),a=r(9082),i=r(1576),l=r(9541),s=r(4676),c=r(5913);let d=()=>{let{data:e,isLoading:t}=(0,i.useStatements)(),r=(0,i.useSubscriberTypeLocalizationRoot)();return(0,o.tZ)(n.wQ,{page:1,onPageChange:e=>{},itemCount:e?.total_count||0,pageCount:1,itemsPerPage:10,isLoading:t,emptyStateLocalizationKey:(0,l.localizationKeys)(`${r}.billingPage.statementsSection.empty`),headers:[(0,l.localizationKeys)(`${r}.billingPage.statementsSection.tableHeader__date`),(0,l.localizationKeys)(`${r}.billingPage.statementsSection.tableHeader__amount`)],rows:(e?.data||[]).map(e=>(0,o.tZ)(p,{statement:e},e.id))})},p=({statement:e})=>{let{timestamp:t,id:r,totals:{grandTotal:i}}=e,{navigate:d}=(0,s.useRouter)();return(0,o.BX)(n.Uk,{onClick:()=>{d(`statement/${r}`)},children:[(0,o.BX)(l.Td,{sx:{cursor:"pointer"},children:[(0,o.tZ)(l.Text,{variant:"subtitle",children:(0,a.p)(t,"monthyear")}),(0,o.tZ)(l.Text,{colorScheme:"secondary",variant:"caption",truncate:!0,sx:e=>({marginTop:e.space.$0x5}),children:(0,c.L)(r)})]}),(0,o.tZ)(l.Td,{sx:{cursor:"pointer"},children:(0,o.BX)(l.Text,{colorScheme:"secondary",children:[i.currencySymbol,i.amountFormatted]})})]})};var m=r(2654),u=r(4174),y=r(2464);function h({text:e,copyLabel:t="Copy"}){let{onCopy:r,hasCopied:n}=(0,y.VP)(e);return(0,o.tZ)(l.Button,{elementDescriptor:l.descriptors.statementCopyButton,variant:"unstyled",onClick:r,sx:e=>({color:"inherit",width:e.sizes.$4,height:e.sizes.$4,padding:0,borderRadius:e.radii.$sm,"&:focus-visible":{outline:"2px solid",outlineColor:e.colors.$neutralAlpha200}}),focusRing:!1,"aria-label":n?"Copied":t,children:(0,o.tZ)(l.Icon,{size:"sm",icon:n?u.Jr:u.CK,"aria-hidden":!0})})}let b={Root:function({children:e}){return(0,o.tZ)(l.Box,{elementDescriptor:l.descriptors.statementRoot,as:"article",sx:e=>({borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$lg,overflow:"clip"}),children:e})},Header:function({title:e,id:t,status:r}){return(0,o.BX)(l.Box,{elementDescriptor:l.descriptors.statementHeader,as:"header",sx:e=>({padding:e.space.$4,background:e.colors.$neutralAlpha25,display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),children:[(0,o.BX)(l.Span,{elementDescriptor:l.descriptors.statementHeaderTitleContainer,children:[(0,o.tZ)(l.Heading,{elementDescriptor:l.descriptors.statementHeaderTitle,textVariant:"h2",localizationKey:e}),(0,o.BX)(l.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:[(0,o.tZ)(h,{copyLabel:"Copy statement ID",text:t}),(0,o.tZ)(l.Text,{colorScheme:"secondary",variant:"subtitle",children:(0,c.L)(t)})]})]}),(0,o.tZ)(l.Badge,{elementDescriptor:l.descriptors.statementHeaderBadge,colorScheme:"open"===r?"secondary":"primary",sx:{textTransform:"capitalize"},children:r})]})},Body:function({children:e}){return(0,o.tZ)(l.Box,{elementDescriptor:l.descriptors.statementBody,children:e})},Section:function({children:e}){return(0,o.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSection,as:"section",children:e})},SectionHeader:function({text:e}){return(0,o.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSectionHeader,sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$1,background:e.colors.$neutralAlpha50,borderBlockWidth:e.borderWidths.$normal,borderBlockStyle:e.borderStyles.$solid,borderBlockColor:e.colors.$neutralAlpha100}),children:(0,o.tZ)(l.Heading,{elementDescriptor:l.descriptors.statementSectionHeaderTitle,textVariant:"h3",as:"h2",localizationKey:e,sx:e=>({fontWeight:e.fontWeights.$medium})})})},SectionContent:function({children:e}){return(0,o.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSectionContent,children:e})},SectionContentItem:function({children:e}){return(0,o.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentItem,sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,"&:not(:first-child)":{borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100}}),children:e})},SectionContentDetailsHeader:function({title:e,description:t,secondaryTitle:r,secondaryDescription:n}){return(0,o.BX)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeader,sx:e=>({marginBlockEnd:e.space.$2,display:"flex",justifyContent:"space-between"}),children:[(0,o.BX)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderItem,children:[(0,o.BX)(l.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$1}),children:[(0,o.tZ)(l.Icon,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderItemIcon,icon:u.ou,colorScheme:"neutral"}),(0,o.tZ)(l.Heading,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderTitle,as:"h3",textVariant:"h3",localizationKey:e})]}),(0,o.tZ)(l.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderDescription,localizationKey:t,sx:{textTransform:"lowercase"}})]}),(0,o.BX)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderItem,sx:{textAlign:"right"},children:[r&&(0,o.tZ)(l.Text,{variant:"h3",elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderSecondaryTitle,localizationKey:r}),n&&(0,o.tZ)(l.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderSecondaryDescription,localizationKey:n})]})]})},SectionContentDetailsList:function({children:e}){return(0,o.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsList,as:"ul",sx:e=>({margin:0,padding:0,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$md,overflow:"hidden"}),children:e})},SectionContentDetailsListItem:function({labelIcon:e,label:t,valueCopyable:r=!1,value:n,valueTruncated:a=!1}){return(0,o.BX)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsListItem,as:"li",sx:e=>({margin:0,paddingInline:e.space.$2,paddingBlock:e.space.$1x5,display:"flex",justifyContent:"space-between",flexWrap:"wrap",columnGap:e.space.$2,rowGap:e.space.$0x5,"&:not(:first-child)":{borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100}}),children:[(0,o.BX)(l.Span,{elementDescriptor:l.descriptors.statementSectionContentDetailsListItemLabelContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$1x5}),children:[e?(0,o.tZ)(l.Icon,{icon:e,colorScheme:"neutral"}):null,(0,o.tZ)(l.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:l.descriptors.statementSectionContentDetailsListItemLabel,localizationKey:t})]}),(0,o.tZ)(l.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:"string"==typeof n?(0,o.BX)(o.HY,{children:[r?(0,o.tZ)(h,{copyLabel:"Copy statement ID",text:n}):null,(0,o.tZ)(l.Text,{colorScheme:"secondary",variant:"caption",elementDescriptor:l.descriptors.statementSectionContentDetailsListItemValue,children:a?(0,c.L)(n):n})]}):(0,o.tZ)(l.Text,{elementDescriptor:l.descriptors.statementSectionContentDetailsListItemValue,colorScheme:"secondary",variant:"caption",localizationKey:n})})]})},Footer:function({label:e,value:t}){return(0,o.BX)(l.Box,{elementDescriptor:l.descriptors.statementFooter,as:"footer",sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,background:e.colors.$neutralAlpha25,borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100,display:"flex",justifyContent:"space-between"}),children:[(0,o.tZ)(l.Text,{variant:"h3",localizationKey:e,elementDescriptor:l.descriptors.statementFooterLabel}),(0,o.BX)(l.Span,{elementDescriptor:l.descriptors.statementFooterValueContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$2x5}),children:[(0,o.tZ)(l.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:l.descriptors.statementFooterCurrency,children:"USD"}),(0,o.tZ)(l.Text,{variant:"h3",elementDescriptor:l.descriptors.statementFooterValue,children:t})]})]})}},x=()=>{let{params:e,navigate:t}=(0,s.useRouter)(),{isLoading:r}=(0,i.useStatements)(),{getStatementById:n}=(0,i.useStatementsContext)(),c=(0,i.useSubscriberTypeLocalizationRoot)(),{t:d}=(0,l.useLocalizations)(),p=e.statementId?n(e.statementId):null;return r?(0,o.tZ)(l.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,o.tZ)(l.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:l.descriptors.spinner})}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(m.h.Root,{sx:e=>({borderBlockEndWidth:e.borderWidths.$normal,borderBlockEndStyle:e.borderStyles.$solid,borderBlockEndColor:e.colors.$neutralAlpha100,marginBlockEnd:e.space.$4,paddingBlockEnd:e.space.$4}),children:(0,o.tZ)(m.h.BackLink,{onClick:()=>void t("../../",{searchParams:new URLSearchParams("tab=statements")}),children:(0,o.tZ)(m.h.Title,{localizationKey:(0,l.localizationKeys)(`${c}.billingPage.statementsSection.title`),textVariant:"h2"})})}),p?(0,o.BX)(b.Root,{children:[(0,o.tZ)(b.Header,{title:(0,a.p)(p.timestamp,"monthyear"),id:p.id,status:p.status}),(0,o.tZ)(b.Body,{children:p.groups.map(e=>(0,o.BX)(b.Section,{children:[(0,o.tZ)(b.SectionHeader,{text:(0,a.p)(e.timestamp,"long")}),(0,o.tZ)(b.SectionContent,{children:e.items.map(e=>(0,o.BX)(b.SectionContentItem,{children:[(0,o.tZ)(b.SectionContentDetailsHeader,{title:e.subscription.plan.name,description:`${e.subscription.amount?.currencySymbol}${e.subscription.amount?.amountFormatted} / ${"month"===e.subscription.planPeriod?d((0,l.localizationKeys)("commerce.month")):d((0,l.localizationKeys)("commerce.year"))}`,secondaryTitle:`${e.amount.currencySymbol}${e.amount.amountFormatted}`}),(0,o.BX)(b.SectionContentDetailsList,{children:[(0,o.tZ)(b.SectionContentDetailsListItem,{label:"recurring"===e.chargeType?(0,l.localizationKeys)(`${c}.billingPage.statementsSection.itemCaption__paidForPlan`,{plan:e.subscription.plan.name,period:e.subscription.planPeriod}):(0,l.localizationKeys)(`${c}.billingPage.statementsSection.itemCaption__subscribedAndPaidForPlan`,{plan:e.subscription.plan.name,period:e.subscription.planPeriod}),labelIcon:"recurring"===e.chargeType?u.uR:u.v3,value:e.id,valueTruncated:!0,valueCopyable:!0}),e.subscription.credit&&e.subscription.credit.amount.amount>0?(0,o.tZ)(b.SectionContentDetailsListItem,{label:(0,l.localizationKeys)(`${c}.billingPage.statementsSection.itemCaption__proratedCredit`),value:`(${e.subscription.credit.amount.currencySymbol}${e.subscription.credit.amount.amountFormatted})`}):null]})]},e.id))})]},e.timestamp.toISOString()))}),(0,o.tZ)(b.Footer,{label:(0,l.localizationKeys)(`${c}.billingPage.statementsSection.totalPaid`),value:`${p.totals.grandTotal.currencySymbol}${p.totals.grandTotal.amountFormatted}`})]}):(0,o.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)(`${c}.billingPage.statementsSection.notFound`),sx:{textAlign:"center"}})]})}}}]);